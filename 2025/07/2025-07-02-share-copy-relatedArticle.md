# 2025-07-02

## 今日やったこと・学んだこと
- **ソーシャルシェア機能の実装**
    - `react-share`ライブラリを導入し、記事ページにX(旧Twitter)、Facebook、Lineのシェアボタンを設置した。
    - 記事のタイトルとURLをクリップボードにコピーするボタンを追加した。
    - シェアボタンのデザイン調整（アイコンの変更、余白の削除など）を行った。
- **コードブロックへのコピー機能追加**
    - 記事内のコードブロック（`<pre><code>`）にマウスホバーすると表示されるコピーボタンを実装した。
    - `libs/utils.ts`でHTMLを生成する際にボタンを埋め込み、クライアントサイドでイベントリスナーを設定してコピー機能を実現した。
- **公開日・更新日の併記**
    - 記事の日付表示エリアに、公開日だけでなく更新日も表示するように修正した。
    - 公開日と更新日が近い場合は、更新日を非表示にするロジックを実装した。
    - 日付の表示形式を`yyyy.MM.dd`形式に変更した。
- **関連記事機能の実装**
    - 記事の最後に、同じカテゴリに属する他の記事を「関連記事」として表示する機能を追加した。
    - ホームページの記事一覧コンポーネントを再利用し、関連記事セクションでは日付を非表示にすることで、見た目の調整を行った。

## 疑問・課題
- **`next/image` のホスト名設定エラー**
    - microCMSの画像を`next/image`で表示しようとした際に、許可されていないホスト名としてエラーが発生した。
    - **解決策:** `next.config.js`に`images.remotePatterns`を設定し、microCMSのアセット用ホスト名（`images.microcms-assets.io`）を許可することで解決した。設定変更後は開発サーバーの再起動が必要だった。
- **CSSモジュールのスタイル上書き**
    - 関連記事のカードサイズをコンパクトにするため、`ArticleListItem`のスタイルを`RelatedArticles`から上書きしようとしたが、CSSの優先順位の問題でうまく適用されなかった。
    - **解決策:** 最終的に、`RelatedArticles`専用の`RelatedArticleListItem`という別コンポーネントを作成することで、スタイルを完全に分離し問題を解決した。
- **`date-fns-tz`のフォーマット指定エラー**
    - `formatInTimeZone`関数の書式指定文字列にタイポがあり、`RangeError`が発生した。
    - **解決策:** ドキュメントを確認し、正しい書式指定文字列（`yyyy`）に修正した。

## メモ
- `next.config.js`を変更した際は、必ず開発サーバーの再起動が必要。
- TypeScriptのエラー（`Property 'x' does not exist on type 'IntrinsicAttributes & Props'`）は、コンポーネント間で渡す`props`と、受け取り側の型定義（`type Props`）が一致していない場合に発生する。ファイルを複数修正した際は、すべてのファイルが正しく保存・反映されているか確認することが重要。
- CSSモジュールで子コンポーネントのスタイルを上書きする場合、`:global()`を使う方法もあるが、セレクタの特異性が原因でうまく適用されないことがある。より確実なのは、専用のコンポーネントを作成してスタイルを分離する方法。
