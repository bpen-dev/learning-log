# 2025-07-06

## 今日やったこと・学んだこと
- WordPress(Lightsail)からNext.js(Vercel)へのサイト移行を完遂させた。
- Vercelに独自ドメインを設定し、DNSレコード（A, CNAME, NS）の役割と設定方法を学んだ。
    - CNAME設定時の「他のレコードと競合する」エラーを解決した。
    - DNSの管理は、ドメインを登録したサービス（今回はRoute 53の「登録済みドメイン」）でNSレコードを変更するのが正解だと学んだ。
- DNS設定変更後、古いサイトが表示され続けるキャッシュ問題を体験し、VPNや別ネットワークで確認する手法を学んだ。
- Googleサーチコンソールに新しいプロパティを登録し、サイトマップを送信した。
    - サイトマップURLの末尾が `//` になるエラーを、Vercelの環境変数 `BASE_URL` を修正して解決した。
- `next.config.js` を使った301リダイレクト設定を実装した。
    - リダイレクトループやトップページが転送される不具合を、正規表現 `((?!...).+)` を使って解決した。
- クローズドASP（レントラックス）からの招待メールに対し、本名を併記したビジネスメールを作成した。
- `www`あり/なしのURLを統一する重要性（SEOにおける評価の分散防止）を学び、Vercelで設定する方法を理解した。

## 疑問・課題
- サーチコンソールのインデックス状況が安定するまで、どのくらいの期間がかかるのか。
- サイト移行後のアクセス数や検索順位の変動を、今後どのようにモニタリングしていくか。
- 個人のGmailではなく、独自ドメインのメールアドレスを導入すべきか、またそのタイミング。

## メモ
- サイト移行後の「インデックス未登録」エラーの増加は、Googleがサイト構造を再学習している過程で起こる正常な現象。エラーの「理由」を注視することが重要。「ページにリダイレクトがあります」は成功の証。
- Lightsailのインスタンス削除は、DNSの変更が完全に反映されるのを待ち、最低でも24〜48時間経ってから行うのが安全。
- リダイレクト設定は、ページの表示速度に体感できるほどの悪影響はほとんどない。SEO上のメリットが圧倒的に大きい。
- ASPなど企業とのやり取りでは、本名とハンドルネームを併記するのが丁寧でスムーズ。
