# 2025-06-28

## 今日やったこと・学んだこと
- モバイル向けのUI改善として、ボトムナビゲーションメニューを実装した
  - 「検索」「上へ」「メニュー」の3つの機能ボタンを配置
  - 下スクロールで隠れ、上スクロールで現れるインタラクションを追加
- ボトムメニューの各ボタンに応じた機能を実装
  - **検索**: 検索バーをモーダルウィンドウとして表示するように改修・デザイン改善
  - **メニュー**: PC版のサイドバーとは別に、モバイル用のスライドメニューを実装。オーバーレイや閉じるボタンを追加し、UXを向上
- PC版とモバイル版のレイアウトを完全に分離
  - メディアクエリ（`@media`）を用いて、PCでは従来のサイドバー、モバイルではボトムメニューとスライドメニューが表示されるように修正し、レイアウト崩れを解消
- Next.js (App Router) で発生したエラーのデバッグ
  - **Propsのシリアライズエラー**: サーバーコンポーネントからクライアントコンポーネントへ関数をPropsとして渡せないルールについて学び、React Context APIを用いた状態管理に設計を修正して解決した。
  - **ハイドレーションミスマッチ**: サーバーが生成したHTMLとブラウザが描画したHTMLの不一致が原因であることを理解し、ブラウザ拡張機能が影響している可能性と、`suppressHydrationWarning`による抑制方法について学んだ。

## 疑問・課題
- Next.jsのサーバーコンポーネントとクライアントコンポーネントの間のやり取り（特にProps）には、今回学んだ以外にも様々な制約がありそうなので、公式ドキュメントで改めてベストプラクティスを確認する必要がある。
- コンポーネントの状態管理について、より大規模なアプリケーションになった場合、Context以外の方法（Zustand, Jotaiなど）も検討する必要が出てくるかもしれない。

## メモ
- `A tree hydrated but some attributes of the server rendered HTML didn't match...` の警告は、ブラウザ拡張機能が原因のことが多い。シークレットモードで確認するのが有効。
- `'use client'`コンポーネント間で関数をPropsとして渡すと、`Props must be serializable...`エラーが発生する。状態管理はContext APIで一元化するか、状態とロジックを単一のコンポーネントに閉じることで回避する。
