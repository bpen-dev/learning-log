# 2025-06-29

## 今日やったこと・学んだこと
- 著者紹介ページを追加した
  - `app/writer/page.tsx`を作成し、静的なプロフィールページを実装した。
  - `app/writer/page.module.css`でページのスタイリングを行った。
  - ユーザー提供のテキストに合わせて、ページの内容を更新した。
- サイドバーと記事ページから著者ページへのリンクを設定した
  - `components/Sidebar/index.tsx`を修正し、プロフィール名と画像から著者ページへ飛ぶようにした。
  - `components/Sidebar/index.module.css`を修正し、プロフィール名をリンクのように青色＋下線で表示されるようにした。
  - `components/Article/index.tsx`を修正し、記事内の著者名から著者ページへリンクするようにした。
- 免責事項とプライバシーポリシーのページを追加した
  - `app/disclaimer/page.tsx`と`app/privacy-policy/page.tsx`を作成した。
  - 共通のスタイルとして`app/disclaimer/page.module.css`を作成・適用した。
  - `components/Footer/index.tsx`と`components/Footer/index.module.css`を修正し、フッターに各ページへのリンクを追加した。
- publicフォルダの役割について学んだ
  - プロフィール画像などの静的ファイルは`public`ディレクトリに配置することで、アプリケーションから直接参照できることを確認した。 (`public/images/profile.jpg`)
- **お問い合わせページを実装した**
    - **UIの作成**:
        - `app/contact/page.tsx` を作成し、お問い合わせページの基本的な構造を構築した。
        - `components/ContactForm` ディレクトリに、フォーム本体のUIを持つ `index.tsx` と `index.module.css` を作成した。
    - **バックエンド機能の実装 (API Route)**:
        - microCMSに「contacts」というAPI（リスト形式）を新規作成し、POSTメソッドを有効化した。
        - `app/api/contact/route.ts` を作成し、ブラウザからのリクエストを安全にmicroCMSへ中継するサーバーサイドのロジックを実装した。これにより、APIキーをフロントエンドに露出させることなく、安全にデータを送信できるようになった。
    - **セキュリティの強化**:
        - **レートリミット**: Upstashと`@upstash/ratelimit`を導入し、同一IPアドレスからの短時間の連続投稿を制限するスパム対策を実装した。
        - **内容の検証**: お問い合わせ内容に日本語が含まれていない場合にエラーを返す処理を追加し、海外からの機械的なスパムをフィルタリングするようにした。
    - **フッターの改善**:
        - フッターにお問い合わせページへのリンクを追加した。
        - モバイル表示時に、各リンクが縦に並ぶようにCSSを修正し、レイアウトの崩れを防いだ。
        - コピーライト表記をサイトのタイトルに合わせて更新した。
    - **関連ページの更新**:
        - 免責事項とプライバシーポリシーのページに、お問い合わせフォームへのリンクを追加し、ユーザーが連絡を取りやすいようにした。
    - **環境変数の設定**:
        - `NEXT_PUBLIC_` プレフィックスを付けるとクライアントサイドに環境変数が公開されてしまうリスクと、API Routeを使ってサーバーサイドで処理することの重要性を学んだ。
        - 本番環境で動作させるために、Vercelの管理画面にも環境変数を設定する必要があることを確認した。

## 疑問・課題
- 

## メモ
- お問い合わせフォームの実装は、単にUIを作るだけでなく、データの送信先となるバックエンド、セキュリティ対策（スパム、不正リクエスト）、本番環境での設定など、考慮すべき点が多いことを学んだ。
- HTTPステータスコード（400, 413, 429など）が、どのようなエラーを示しているのかを具体的に知ることで、デバッグやセキュリティ対策がしやすくなる。
